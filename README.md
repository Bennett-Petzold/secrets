secrets
=======

[![Build Status][badge-ci]][ci]
[![Cargo Crate][badge-package]][package]
[![License][badge-license]][license]

A library to help safely hold cryptographic secrets in memory.

Buffers allocated through this library:

* restrict themselves from being read from and written to by default
* allow access to their contents in explicit, limited scopes
* are never included in core dumps
* are never swapped to permanent storage (using `mlock`)
* are protected from overflows and underflows by inaccessible guard pages (using `mprotect`)
* are protected from underflows by a random canary
* immediately zero out the contents of the memory used to initialize them
* immediately zero out the contents of their allocated memory when they leave scope

Example
-------

Generating a random secret:

```rust
use secrets::Secret;

let secret   = Secret::random(32);
let secret_r = secret.borrow();

println!("{:?}", secret_r.as_slice());
```

Creating a secret from existing data:

```rust
use secrets::Secret;

let mut string   = "password".to_string();
let     secret   = Secret::from(unsafe { string.as_mut_vec() });
let     secret_r = secret.borrow();

println!("{}",   string);              // NUL bytes
println!("{:?}", secret_r.as_slice()); // b"string"
```

Documentation
-------------

[API documentation][docs] for the latest `master` is autogenerated using rustdoc.

License
-------

`secrets` is distributed under the [MIT license][license].

[ci]:      https://travis-ci.org/stouset/secrets
[docs]:    https://stouset.github.io/secrets
[license]: https://github.com/stouset/secrets/blob/master/LICENSE
[package]: https://crates.io/crates/secrets

[badge-ci]:      https://img.shields.io/travis/stouset/secrets.svg
[badge-license]: https://img.shields.io/crates/l/secrets.svg
[badge-package]: https://img.shields.io/crates/v/secrets.svg
